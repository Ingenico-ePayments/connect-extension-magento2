<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">

    <type name="Magento\QuoteGraphQl\Model\Cart\Payment\AdditionalDataProviderPool">
        <arguments>
            <argument name="dataProviders" xsi:type="array">
                <item name="worldline" xsi:type="object">Worldline\Connect\Model\Resolver\DataProvider</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Framework\View\Element\UiComponent\DataProvider\CollectionFactory">
        <arguments>
            <argument name="collections" xsi:type="array">
                <item name="epayments_events_index_grid_data_source" xsi:type="string">Worldline\Connect\Model\ResourceModel\Event\Grid\Collection</item>
            </argument>
        </arguments>
    </type>

    <!-- Command pools -->
    <virtualType name="WorldlineCardsCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">WorldlineInitializeCardCommand</item>
                <item name="authorize" xsi:type="string">WorldlineInitializeCardCommand</item>
                <item name="capture" xsi:type="string">WorldlineInitializeCardCommand</item>
                <item name="authorize_capture" xsi:type="string">WorldlineInitializeCardCommand</item>
                <item name="void" xsi:type="string">Worldline\Connect\Gateway\Command\CancelCommand</item>
                <item name="cancel" xsi:type="string">Worldline\Connect\Gateway\Command\CancelCommand</item>
                <item name="refund" xsi:type="string">Worldline\Connect\Gateway\Command\RefundCommand</item>
                <item name="accept_payment" xsi:type="string">Worldline\Connect\Gateway\Command\AcceptPaymentCommand</item>
                <item name="deny_payment" xsi:type="string">Worldline\Connect\Gateway\Command\DenyPaymentCommand</item>
                <item name="fetch_transaction_information" xsi:type="string">Worldline\Connect\Gateway\Command\FetchTransactionInfoCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineRedirectCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">WorldlineInitializeRedirectCommand</item>
                <item name="authorize" xsi:type="string">WorldlineInitializeRedirectCommand</item>
                <item name="capture" xsi:type="string">WorldlineInitializeRedirectCommand</item>
                <item name="void" xsi:type="string">Worldline\Connect\Gateway\Command\CancelCommand</item>
                <item name="cancel" xsi:type="string">Worldline\Connect\Gateway\Command\CancelCommand</item>
                <item name="refund" xsi:type="string">Worldline\Connect\Gateway\Command\RefundCommand</item>
                <item name="accept_payment" xsi:type="string">Worldline\Connect\Gateway\Command\AcceptPaymentCommand</item>
                <item name="deny_payment" xsi:type="string">Worldline\Connect\Gateway\Command\DenyPaymentCommand</item>
                <item name="fetch_transaction_information" xsi:type="string">Worldline\Connect\Gateway\Command\FetchTransactionInfoCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Magento\Payment\Model\MethodList">
        <arguments>
            <argument name="additionalChecks" xsi:type="array">
                <item name="is_available_in_api" xsi:type="string">is_available_in_api</item>
            </argument>
        </arguments>
    </type>

    <type name="Magento\Payment\Model\Checks\SpecificationFactory">
        <arguments>
            <argument name="mapping" xsi:type="array">
                <item name="is_available_in_api" xsi:type="object">Worldline\Connect\Model\Checks\IsAvailableInApi</item>
            </argument>
        </arguments>
    </type>

    <virtualType name="WorldlineInitializeCardCommand" type="Worldline\Connect\Gateway\Command\InitializeCommand">
        <arguments>
            <argument name="createPaymentRequestBuilder" xsi:type="object">Worldline\Connect\Gateway\Command\CreatePaymentRequest\CardRequestBuilder</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineInitializeRedirectCommand" type="Worldline\Connect\Gateway\Command\InitializeCommand">
        <arguments>
            <argument name="createPaymentRequestBuilder" xsi:type="object">Worldline\Connect\Gateway\Command\CreatePaymentRequest\RedirectRequestBuilder</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineInitializeHppCommand" type="Worldline\Connect\Gateway\Command\InitializeCommand">
        <arguments>
            <argument name="createPaymentRequestBuilder" xsi:type="object">Worldline\Connect\Gateway\Command\CreateHostedCheckoutRequestBuilder</argument>
        </arguments>
    </virtualType>

    <!-- Cards -->
    <virtualType name="Worldline\Connect\PaymentMethod\Cards" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARDS</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineCardsValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineCardsValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCardsValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineCardsCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCardsCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineCardsConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCardsValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineCardsConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCardsConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineCardsConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCardsConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARDS</argument>
        </arguments>
    </virtualType>

    <!-- American Express -->
    <virtualType name="Worldline\Connect\PaymentMethod\AmericanExpress" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::AMERICAN_EXPRESS</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineAmericanExpressValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineAmericanExpressValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineAmericanExpressValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineAmericanExpressCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineAmericanExpressCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineAmericanExpressConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineAmericanExpressValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineAmericanExpressConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineAmericanExpressConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineAmericanExpressConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineAmericanExpressConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::AMERICAN_EXPRESS</argument>
        </arguments>
    </virtualType>

    <!-- BC Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\BCCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::BC_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineBCCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineBCCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineBCCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineBCCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineBCCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineBCCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineBCCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineBCCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineBCCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineBCCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineBCCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::BC_CARD</argument>
        </arguments>
    </virtualType>

    <!-- Carte Bancaire -->
    <virtualType name="Worldline\Connect\PaymentMethod\CarteBancaire" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARTE_BANCAIRE</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineCarteBancaireValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineCarteBancaireValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCarteBancaireValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineCarteBancaireCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCarteBancaireCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineCarteBancaireConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCarteBancaireValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineCarteBancaireConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCarteBancaireConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineCarteBancaireConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineCarteBancaireConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARTE_BANCAIRE</argument>
        </arguments>
    </virtualType>

    <!-- Diners Club -->
    <virtualType name="Worldline\Connect\PaymentMethod\DinersClub" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::DINERS_CLUB</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineDinersClubValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineDinersClubValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDinersClubValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineDinersClubCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDinersClubCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineDinersClubConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDinersClubValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineDinersClubConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDinersClubConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineDinersClubConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDinersClubConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::DINERS_CLUB</argument>
        </arguments>
    </virtualType>

    <!-- Discover -->
    <virtualType name="Worldline\Connect\PaymentMethod\Discover" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::DISCOVER</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineDiscoverValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineDiscoverValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDiscoverValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineDiscoverCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDiscoverCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineDiscoverConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDiscoverValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineDiscoverConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDiscoverConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineDiscoverConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineDiscoverConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::DISCOVER</argument>
        </arguments>
    </virtualType>

    <!-- Hyundai Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\HyundaiCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::HYUNDAI_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineHyundaiCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineHyundaiCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHyundaiCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineHyundaiCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHyundaiCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineHyundaiCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHyundaiCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineHyundaiCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHyundaiCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineHyundaiCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHyundaiCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::HYUNDAI_CARD</argument>
        </arguments>
    </virtualType>

    <!-- JCB -->
    <virtualType name="Worldline\Connect\PaymentMethod\JCB" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::JCB</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineJCBValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineJCBValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineJCBValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineJCBCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineJCBCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineJCBConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineJCBValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineJCBConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineJCBConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineJCBConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineJCBConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::JCB</argument>
        </arguments>
    </virtualType>

    <!-- KB Kookmin Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\KBKookminCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::KB_KOOKMIN_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineKBKookminCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineKBKookminCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKBKookminCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineKBKookminCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKBKookminCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineKBKookminCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKBKookminCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineKBKookminCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKBKookminCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineKBKookminCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKBKookminCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::KB_KOOKMIN_CARD</argument>
        </arguments>
    </virtualType>

    <!-- KEB Hana Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\KEBHanaCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::KEB_HANA_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineKEBHanaCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineKEBHanaCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKEBHanaCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineKEBHanaCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKEBHanaCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineKEBHanaCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKEBHanaCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineKEBHanaCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKEBHanaCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineKEBHanaCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineKEBHanaCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::KEB_HANA_CARD</argument>
        </arguments>
    </virtualType>

    <!-- Lotte Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\LotteCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::LOTTE_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineLotteCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineLotteCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineLotteCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineLotteCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineLotteCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineLotteCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineLotteCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineLotteCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineLotteCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineLotteCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineLotteCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::LOTTE_CARD</argument>
        </arguments>
    </virtualType>

    <!-- Mastercard -->
    <virtualType name="Worldline\Connect\PaymentMethod\Mastercard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::MASTERCARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineMastercardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineMastercardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineMastercardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineMastercardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineMastercardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineMastercardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineMastercardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineMastercardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineMastercardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineMastercardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineMastercardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::MASTERCARD</argument>
        </arguments>
    </virtualType>

    <!-- NH Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\NHCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::NH_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineNHCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineNHCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineNHCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineNHCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineNHCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineNHCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineNHCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineNHCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineNHCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineNHCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineNHCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::NH_CARD</argument>
        </arguments>
    </virtualType>

    <!-- Samsung Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\SamsungCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::SAMSUNG_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineSamsungCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineSamsungCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSamsungCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineSamsungCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSamsungCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineSamsungCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSamsungCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineSamsungCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSamsungCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineSamsungCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSamsungCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::SAMSUNG_CARD</argument>
        </arguments>
    </virtualType>

    <!-- Shinhan Card -->
    <virtualType name="Worldline\Connect\PaymentMethod\ShinhanCard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::SHINHAN_CARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineShinhanCardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineShinhanCardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineShinhanCardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineShinhanCardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineShinhanCardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineShinhanCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineShinhanCardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineShinhanCardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineShinhanCardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineShinhanCardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineShinhanCardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::SHINHAN_CARD</argument>
        </arguments>
    </virtualType>

    <!-- UnionPay ExpressPay -->
    <virtualType name="Worldline\Connect\PaymentMethod\UnionPayExpressPay" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::UNIONPAY_EXPRESSPAY</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineUnionPayExpressPayValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineUnionPayExpressPayValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineUnionPayExpressPayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineUnionPayExpressPayCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineUnionPayExpressPayCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineUnionPayExpressPayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineUnionPayExpressPayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineUnionPayExpressPayConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineUnionPayExpressPayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineUnionPayExpressPayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineUnionPayExpressPayConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::UNIONPAY_EXPRESSPAY</argument>
        </arguments>
    </virtualType>

    <!-- Visa -->
    <virtualType name="Worldline\Connect\PaymentMethod\Visa" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::VISA</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineVisaValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineCardsCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineVisaValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVisaValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineVisaCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVisaCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineVisaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVisaValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineVisaConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVisaConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineVisaConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVisaConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::VISA</argument>
        </arguments>
    </virtualType>

    <!-- Giropay -->
    <virtualType name="Worldline\Connect\PaymentMethod\Giropay" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::GIROPAY</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineGiropayValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineGiropayValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineGiropayValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineGiropayCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineGiropayCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineGiropayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineGiropayValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineGiropayConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineGiropayConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineGiropayConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineGiropayConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::GIROPAY</argument>
        </arguments>
    </virtualType>

    <!-- iDeal -->
    <virtualType name="Worldline\Connect\PaymentMethod\iDeal" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::IDEAL</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineIDealValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineIDealValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineIDealValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineIDealCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineIDealCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineIDealConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineIDealValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineIDealConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineIDealConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineIDealConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineIDealConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::IDEAL</argument>
        </arguments>
    </virtualType>

    <!-- Open Banking -->
    <virtualType name="Worldline\Connect\PaymentMethod\OpenBanking" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::OPEN_BANKING</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineOpenBankingValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineOpenBankingValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineOpenBankingValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineOpenBankingCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineOpenBankingCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineOpenBankingConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineOpenBankingValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineOpenBankingConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineOpenBankingConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineOpenBankingConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineOpenBankingConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::OPEN_BANKING</argument>
        </arguments>
    </virtualType>

    <!-- PayPal -->
    <virtualType name="Worldline\Connect\PaymentMethod\PayPal" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::PAYPAL</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlinePayPalValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlinePayPalValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePayPalValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlinePayPalCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePayPalCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlinePayPalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePayPalValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlinePayPalConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePayPalConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlinePayPalConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePayPalConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::PAYPAL</argument>
        </arguments>
    </virtualType>

    <!-- Paysafecard -->
    <virtualType name="Worldline\Connect\PaymentMethod\Paysafecard" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::PAYSAFECARD</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlinePaysafecardValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlinePaysafecardValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePaysafecardValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlinePaysafecardCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePaysafecardCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlinePaysafecardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePaysafecardValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlinePaysafecardConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePaysafecardConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlinePaysafecardConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlinePaysafecardConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::PAYSAFECARD</argument>
        </arguments>
    </virtualType>

    <!-- Sofort -->
    <virtualType name="Worldline\Connect\PaymentMethod\Sofort" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::SOFORT</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineSofortValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineSofortValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSofortValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineSofortCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSofortCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSofortValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineSofortConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSofortConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineSofortConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineSofortConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::SOFORT</argument>
        </arguments>
    </virtualType>

    <!-- Trustly -->
    <virtualType name="Worldline\Connect\PaymentMethod\Trustly" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::TRUSTLY</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineTrustlyValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineRedirectCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineTrustlyValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineTrustlyValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineTrustlyCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineTrustlyCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineTrustlyConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineTrustlyValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineTrustlyConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineTrustlyConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineTrustlyConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineTrustlyConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::TRUSTLY</argument>
        </arguments>
    </virtualType>

    <!-- HPP -->
    <virtualType name="Worldline\Connect\PaymentMethod\Hpp" type="Magento\Payment\Model\Method\Adapter">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::HOSTED</argument>
            <argument name="formBlockType" xsi:type="string">Magento\Payment\Block\Form</argument>
            <argument name="infoBlockType" xsi:type="string">Worldline\Connect\Block\Info</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineHppValueHandlerPool</argument>
            <argument name="commandPool" xsi:type="object">WorldlineHppCommandPool</argument>
            <argument name="validatorPool" xsi:type="object">WorldlineHppValidatorPool</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHppValidatorPool" type="Magento\Payment\Gateway\Validator\ValidatorPool">
        <arguments>
            <argument name="validators" xsi:type="array">
                <item name="country" xsi:type="string">WorldlineHppCountryValidator</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHppCountryValidator" type="Magento\Payment\Gateway\Validator\CountryValidator">
        <arguments>
            <argument name="config" xsi:type="object">WorldlineHppConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHppValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineHppConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHppConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineHppConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHppConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::HOSTED</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineHppCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="initialize" xsi:type="string">WorldlineInitializeHppCommand</item>
                <item name="void" xsi:type="string">Worldline\Connect\Gateway\Command\CancelCommand</item>
                <item name="cancel" xsi:type="string">Worldline\Connect\Gateway\Command\CancelCommand</item>
                <item name="refund" xsi:type="string">Worldline\Connect\Gateway\Command\RefundCommand</item>
                <item name="accept_payment" xsi:type="string">Worldline\Connect\Gateway\Command\AcceptPaymentCommand</item>
                <item name="deny_payment" xsi:type="string">Worldline\Connect\Gateway\Command\DenyPaymentCommand</item>
                <item name="fetch_transaction_information" xsi:type="string">Worldline\Connect\Gateway\Command\FetchTransactionInfoCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <!-- Vault -->
    <virtualType name="Worldline\Connect\PaymentMethod\Vault" type="Worldline\Connect\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARDS_VAULT</argument>
            <argument name="config" xsi:type="object">WorldlineVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineVaultValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Worldline\Connect\PaymentMethod\Cards</argument>
        </arguments>
    </virtualType>

    <virtualType name="Worldline\Connect\PaymentMethod\AmericanExpressVault" type="Worldline\Connect\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::AMERICAN_EXPRESS_VAULT</argument>
            <argument name="config" xsi:type="object">WorldlineVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineAmericanExpressValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Worldline\Connect\PaymentMethod\AmericanExpress</argument>
        </arguments>
    </virtualType>

    <virtualType name="Worldline\Connect\PaymentMethod\CarteBancaireVault" type="Worldline\Connect\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARTE_BANCAIRE_VAULT</argument>
            <argument name="config" xsi:type="object">WorldlineVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineCarteBancaireValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Worldline\Connect\PaymentMethod\CarteBancaire</argument>
        </arguments>
    </virtualType>

    <virtualType name="Worldline\Connect\PaymentMethod\DiscoverVault" type="Worldline\Connect\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::DISCOVER_VAULT</argument>
            <argument name="config" xsi:type="object">WorldlineVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineDiscoverValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Worldline\Connect\PaymentMethod\Discover</argument>
        </arguments>
    </virtualType>

    <virtualType name="Worldline\Connect\PaymentMethod\MastercardVault" type="Worldline\Connect\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::MASTERCARD_VAULT</argument>
            <argument name="config" xsi:type="object">WorldlineVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineMastercardValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Worldline\Connect\PaymentMethod\Mastercard</argument>
        </arguments>
    </virtualType>

    <virtualType name="Worldline\Connect\PaymentMethod\VisaVault" type="Worldline\Connect\Model\Method\Vault">
        <arguments>
            <argument name="code" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::VISA_VAULT</argument>
            <argument name="config" xsi:type="object">WorldlineVaultConfig</argument>
            <argument name="valueHandlerPool" xsi:type="object">WorldlineVisaValueHandlerPool</argument>
            <argument name="vaultProvider" xsi:type="object">Worldline\Connect\PaymentMethod\Visa</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineVaultConfigValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultConfigValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">WorldlineVaultConfig</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultConfig" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="const">Worldline\Connect\PaymentMethod\PaymentMethods::CARDS</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultSaleCommand" type="Worldline\Connect\Gateway\Command\VaultCommand">
        <arguments>
            <argument name="InitializeCommand" xsi:type="object">WorldlineInitializeCardCommand</argument>
            <argument name="paymentAction" xsi:type="const">Magento\Sales\Model\Order\Payment\Transaction::TYPE_CAPTURE</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultAuthorizeCommand" type="Worldline\Connect\Gateway\Command\VaultCommand">
        <arguments>
            <argument name="InitializeCommand" xsi:type="object">WorldlineInitializeCardCommand</argument>
            <argument name="paymentAction" xsi:type="const">Magento\Sales\Model\Order\Payment\Transaction::TYPE_AUTH</argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultCommandPool" type="Magento\Payment\Gateway\Command\CommandPool">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="vault_authorize" xsi:type="string">WorldlineVaultAuthorizeCommand</item>
                <item name="vault_sale" xsi:type="string">WorldlineVaultSaleCommand</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineVaultCommandManager" type="Magento\Payment\Gateway\Command\CommandManager">
        <arguments>
            <argument name="commandPool" xsi:type="object">WorldlineVaultCommandPool</argument>
        </arguments>
    </virtualType>

    <type name="Magento\Payment\Gateway\Command\CommandManagerPool">
        <arguments>
            <argument name="executors" xsi:type="array">
                <item name="worldline_cards" xsi:type="string">WorldlineVaultCommandManager</item>
                <item name="worldline_americanexpress" xsi:type="string">WorldlineVaultCommandManager</item>
                <item name="worldline_cartebancaire" xsi:type="string">WorldlineVaultCommandManager</item>
                <item name="worldline_mastercard" xsi:type="string">WorldlineVaultCommandManager</item>
                <item name="worldline_visa" xsi:type="string">WorldlineVaultCommandManager</item>
            </argument>
        </arguments>
    </type>

    <preference for="Worldline\Connect\Model\ConfigInterface" type="Worldline\Connect\Model\Config"/>
    <preference for="Worldline\Connect\Model\Worldline\Token\TokenServiceInterface" type="Worldline\Connect\Model\Worldline\Token\TokenService"/>
    <preference for="Worldline\Connect\Model\Worldline\Api\ClientInterface" type="Worldline\Connect\Model\Worldline\Client"/>
    <preference for="Worldline\Connect\Model\OrderUpdate\OrderInterface" type="Worldline\Connect\Model\OrderUpdate\Order"/>
    <preference for="Worldline\Connect\Model\OrderUpdate\SchedulerInterface" type="Worldline\Connect\Model\OrderUpdate\Scheduler"/>
    <preference for="Worldline\Connect\Model\Worldline\Status\Payment\ResolverInterface" type="Worldline\Connect\Model\Worldline\Status\Payment\Resolver"/>
    <preference for="Worldline\Connect\Model\Worldline\Status\Refund\ResolverInterface" type="Worldline\Connect\Model\Worldline\Status\Refund\Resolver"/>
    <preference for="Worldline\Connect\Model\StatusResponseManagerInterface" type="Worldline\Connect\Model\StatusResponseManager"/>
    <preference for="Worldline\Connect\Model\Worldline\Status\Payment\PoolInterface" type="Worldline\Connect\Model\Worldline\Status\Payment\Pool"/>
    <preference for="Worldline\Connect\Model\Worldline\Status\Refund\PoolInterface" type="Worldline\Connect\Model\Worldline\Status\Refund\Pool"/>
    <preference for="Worldline\Connect\Model\Order\OrderServiceInterface" type="Worldline\Connect\Model\Order\OrderService"/>
    <preference for="Worldline\Connect\Model\Transaction\TransactionManagerInterface" type="Worldline\Connect\Model\Transaction\TransactionManager"/>
    <preference for="Worldline\Connect\Api\EventRepositoryInterface" type="Worldline\Connect\Model\Event\EventRepository"/>
    <preference for="Worldline\Connect\Api\EventManagerInterface" type="Worldline\Connect\Model\Event\EventManager"/>
    <preference for="Worldline\Connect\Api\Data\EventInterface" type="Worldline\Connect\Model\Event\DataModel"/>
    <preference for="Worldline\Connect\Api\Data\EventSearchResultsInterface" type="Magento\Framework\Api\SearchResults"/>
    <preference for="Worldline\Connect\Api\SessionManagerInterface" type="Worldline\Connect\Model\Worldline\Session\SessionManager"/>
    <preference for="Worldline\Connect\Api\Data\SessionInterface" type="Worldline\Connect\Model\Worldline\Session\Session"/>
    <preference for="Worldline\Connect\Api\OrderPaymentManagementInterface" type="Worldline\Connect\Model\Order\Payment\OrderPaymentManagement"/>
    <preference for="Worldline\Connect\Api\RefundManagementInterface" type="Worldline\Connect\Model\Worldline\Action\Refund\RefundManagement"/>
    <preference for="Worldline\Connect\Api\PaymentManagementInterface" type="Worldline\Connect\Model\Worldline\Action\Payment\PaymentManagement"/>
    <preference for="Worldline\Connect\Api\FrontendLoggerInterface" type="Worldline\Connect\Logger\FrontendLogger"/>

    <virtualType name="WorldlineAdminTokenPaymentValueHandlerPool" type="Magento\Payment\Gateway\Config\ValueHandlerPool">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="default" xsi:type="string">WorldlineAdminTokenPaymentValueHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="WorldlineAdminTokenPaymentValueHandler" type="Magento\Payment\Gateway\Config\ConfigValueHandler">
        <arguments>
            <argument name="configInterface" xsi:type="object">Worldline\AdminTokenPayment\Gateway\Config\Config</argument>
        </arguments>
    </virtualType>

    <virtualType name="Worldline\AdminTokenPayment\Gateway\Config\Config" type="Magento\Payment\Gateway\Config\Config">
        <arguments>
            <argument name="methodCode" xsi:type="string">worldline_cc_vault</argument>
            <argument name="pathPattern" xsi:type="string">%s/general/%s</argument>
        </arguments>
    </virtualType>

    <!-- Worldline Client setup-->
    <virtualType name="worldlineRequestHandler" type="Worldline\Connect\Logger\Handler\DebugHandler">
        <arguments>
            <argument name="fileName" xsi:type="string">/var/log/worldline_connect.log</argument>
        </arguments>
    </virtualType>

    <virtualType name="worldlineRequestLogger" type="Magento\Framework\Logger\Monolog">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="system" xsi:type="object">worldlineRequestHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Worldline\Connect\Model\Worldline\Client\CommunicatorLogger">
        <arguments>
            <argument name="logger" xsi:type="object">worldlineRequestLogger</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Model\Worldline\Webhook\Handler">
        <arguments>
            <argument name="logger" xsi:type="object">worldlineRequestLogger</argument>
        </arguments>
    </type>
    <type name="Worldline\Connect\Model\Worldline\Client\Communicator">
        <arguments>
            <argument name="logger" xsi:type="object">worldlineRequestLogger</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Model\Event\Processor">
        <arguments>
            <argument name="logger" xsi:type="object">worldlineRequestLogger</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Controller\Webhooks\Index">
        <arguments>
            <argument name="logger" xsi:type="object">worldlineRequestLogger</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Logger\FrontendLogger">
        <arguments>
            <argument name="logger" xsi:type="object">worldlineRequestLogger</argument>
        </arguments>
    </type>

    <!-- Auto order update setup-->
    <virtualType name="realTimeHandler" type="Worldline\Connect\Logger\Handler\InfoHandler">
        <arguments>
            <argument name="fileName" xsi:type="string">/var/log/order_update.log</argument>
        </arguments>
    </virtualType>

    <virtualType name="realTimeLogger" type="Magento\Framework\Logger\Monolog">
        <arguments>
            <argument name="handlers" xsi:type="array">
                <item name="system" xsi:type="object">realTimeHandler</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Worldline\Connect\Model\OrderUpdate\Order">
        <arguments>
            <argument name="logger" xsi:type="object">realTimeLogger</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Model\OrderUpdate\Processor">
        <arguments>
            <argument name="logger" xsi:type="object">realTimeLogger</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Model\OrderUpdate\Scheduler">
        <arguments>
            <argument name="logger" xsi:type="object">realTimeLogger</argument>
        </arguments>
    </type>

    <type name="Magento\Framework\Console\CommandList">
        <arguments>
            <argument name="commands" xsi:type="array">
                <item name="worldline_events" xsi:type="object">Worldline\Connect\Command\ProcessEvents</item>
            </argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Command\ProcessEvents">
        <arguments>
            <argument name="processor" xsi:type="object">Worldline\Connect\Model\Event\Processor\Proxy</argument>
            <argument name="appState" xsi:type="object">Magento\Framework\App\State\Proxy</argument>
        </arguments>
    </type>

    <virtualType name="paymentStatusHandlerPool" type="Worldline\Connect\Model\Worldline\Status\Payment\Pool">
        <arguments>
            <argument name="statusHandlers" xsi:type="array">
                <item name="REDIRECTED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\Redirected</item>
                <item name="PENDING_PAYMENT" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\PendingPayment</item>
                <item name="ACCOUNT_VERIFIED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\NullStatus</item>
                <item name="PENDING_FRAUD_APPROVAL" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\PendingFraudApproval</item>
                <item name="AUTHORIZATION_REQUESTED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\AuthorizationRequested</item>
                <item name="PENDING_APPROVAL" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\PendingApproval</item>
                <item name="PENDING_COMPLETION" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\PendingApproval</item>
                <item name="PENDING_CAPTURE" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\PendingCapture</item>
                <item name="CAPTURE_REQUESTED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\CaptureRequested</item>
                <item name="CAPTURED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\Captured</item>
                <item name="PAID" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\Paid</item>
                <item name="REVERSED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\RejectedCapture</item>
                <item name="CHARGEBACKED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\RejectedCapture</item>
                <item name="REJECTED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\Rejected</item>
                <item name="REJECTED_CAPTURE" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\RejectedCapture</item>
                <item name="CANCELLED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Payment\Handler\Cancelled</item>
            </argument>
        </arguments>
    </virtualType>

    <virtualType name="refundStatusHandlerPool" type="Worldline\Connect\Model\Worldline\Status\Refund\Pool">
        <arguments>
            <argument name="statusHandlers" xsi:type="array">
                <item name="CREATED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\NullStatus</item>
                <item name="PENDING_APPROVAL" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\PendingApproval</item>
                <item name="REJECTED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\NullStatus</item>
                <item name="REFUND_REQUESTED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\RefundRequested</item>
                <item name="CAPTURED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\Refunded</item>
                <item name="REFUNDED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\Refunded</item>
                <item name="CANCELLED" xsi:type="string">Worldline\Connect\Model\Worldline\Status\Refund\Handler\Cancelled</item>
            </argument>
        </arguments>
    </virtualType>

    <type name="Worldline\Connect\Model\Worldline\Status\Payment\Resolver">
        <arguments>
            <argument name="statusHandlerPool" xsi:type="object">paymentStatusHandlerPool</argument>
        </arguments>
    </type>

    <type name="Worldline\Connect\Model\Worldline\Status\Refund\Resolver">
        <arguments>
            <argument name="statusHandlerPool" xsi:type="object">refundStatusHandlerPool</argument>
        </arguments>
    </type>

    <!--
        The following plugins are required to implement Worldline's refund flow into Magento:
    -->
    <type name="Worldline\Connect\Plugin\Magento\Sales\Model\Service\CreditmemoService">
        <arguments>
            <argument name="createRefundAction" xsi:type="object">Worldline\Connect\Model\Worldline\Action\Refund\CreateRefund</argument>
        </arguments>
    </type>
    <type name="Magento\Sales\Api\CreditmemoManagementInterface">
        <plugin name="allowPendingRefunds" type="Worldline\Connect\Plugin\Magento\Sales\Model\Service\CreditmemoService"/>
    </type>

    <type name="Magento\Sales\Model\Order\Payment">
        <plugin name="preventUniqueConstraintViolation" type="Worldline\Connect\Plugin\Magento\Sales\Model\Order\Payment"/>
    </type>

    <type name="Worldline\Connect\Controller\HostedCheckoutPage\ProcessReturn">
        <arguments>
            <argument name="checkoutSession" xsi:type="object">Magento\Checkout\Model\Session\Proxy</argument>
        </arguments>
    </type>
</config>
